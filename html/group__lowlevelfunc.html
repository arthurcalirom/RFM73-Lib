<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>RFM73 Library: Low level functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">RFM73 Library
   &#160;<span id="projectnumber">0.5</span>
   </div>
   <div id="projectbrief">Some low- and mid-level functions to use with RFM73 RF FSK 2.4 GHz module</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Low level functions</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga9714a9407031b0a4b4f6a94787112241"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelfunc.html#ga9714a9407031b0a4b4f6a94787112241">_rfm73_write_cmd</a> (uint8_t reg, uint8_t value)</td></tr>
<tr class="separator:ga9714a9407031b0a4b4f6a94787112241"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacc7444e6bb098e65f61fe35b20437517"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelfunc.html#gacc7444e6bb098e65f61fe35b20437517">_rfm73_read_cmd</a> (uint8_t reg)</td></tr>
<tr class="separator:gacc7444e6bb098e65f61fe35b20437517"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafbdd68774b4b53c263b274a8784e5100"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelfunc.html#gafbdd68774b4b53c263b274a8784e5100">_rfm73_read_buf</a> (uint8_t reg, uint8_t *pBuf, uint8_t length)</td></tr>
<tr class="separator:gafbdd68774b4b53c263b274a8784e5100"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga416c9f0075f8caf35161a38803ab5d4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelfunc.html#ga416c9f0075f8caf35161a38803ab5d4c">_rfm73_write_buf</a> (uint8_t reg, uint8_t *pBuf, uint8_t length)</td></tr>
<tr class="separator:ga416c9f0075f8caf35161a38803ab5d4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga01aad5cd35e15a8490dc12918c8e7023"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelfunc.html#ga01aad5cd35e15a8490dc12918c8e7023">rfm73_power_down</a> ()</td></tr>
<tr class="separator:ga01aad5cd35e15a8490dc12918c8e7023"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeb8d781baf114af4e2ad9f95b44aa567"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelfunc.html#gaeb8d781baf114af4e2ad9f95b44aa567">rfm73_power_up</a> ()</td></tr>
<tr class="separator:gaeb8d781baf114af4e2ad9f95b44aa567"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8cca7f651a435875699648e969c98d15"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelfunc.html#ga8cca7f651a435875699648e969c98d15">_rfm73_activate</a> ()</td></tr>
<tr class="separator:ga8cca7f651a435875699648e969c98d15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81bfd97d8bbcda8fcb4b79b358e4ee9d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelfunc.html#ga81bfd97d8bbcda8fcb4b79b358e4ee9d">_rfm73_toggle_reg_bank</a> (uint8_t rbank)</td></tr>
<tr class="separator:ga81bfd97d8bbcda8fcb4b79b358e4ee9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Low level functions that work directly with RFM73 using SPI communication. </p>
<p>This functions are designed to work directly with RFM73 internal registers. It's supposed that end user doesn't use them in his code, so they have an underslash prefix and don't included in header file.</p>
<p>Low level functions include such actions as:</p>
<ul>
<li>
read and write one or multiply bytes from/to module: _rfm73_read_cmd, _rfm73_write_cmd for single byte, _rfm73_read_buf, _rfm73_write_buf for more than 1 byte. As it seen from function names these may be used to send commands to module. Trivial API example: <div class="fragment"><div class="line">foo = <a class="code" href="group__lowlevelfunc.html#gacc7444e6bb098e65f61fe35b20437517" title="Read data from internal register of the RFM73 module.">_rfm73_read_cmd</a>(<a class="code" href="group__internalcmd.html#ga7ecba9c761d1d16c38d61741ae4c3b35" title="Read command and status registers in format 000AAAAA. AAAAA = 5 bit Register Map Address.">RFM73_CMD_R_REGISTER</a> | <a class="code" href="group__internalreg.html#gac64a78bd306cd5c9737f07a94b216c1e" title="Address of configuration register.">RFM73_RADR_CONFIG</a>)</div>
<div class="line"><a class="code" href="group__lowlevelfunc.html#ga9714a9407031b0a4b4f6a94787112241" title="Writes some value to some internal register or send specific command to module.">_rfm73_write_cmd</a>(<a class="code" href="group__internalcmd.html#ga4d0c723c8f108ea103aee9f1857cbfeb" title="Write command and status registers. AAAAA = 5 bit Register Map Address. Executable in power down or s...">RFM73_CMD_W_REGISTER</a> | RFM73_RADR_EN_AA, bar);</div>
<div class="line"><span class="comment">// Flush RX buffer:</span></div>
<div class="line"><a class="code" href="group__lowlevelfunc.html#ga9714a9407031b0a4b4f6a94787112241" title="Writes some value to some internal register or send specific command to module.">_rfm73_write_cmd</a>(<a class="code" href="group__internalcmd.html#ga75156ca9d9d760da36ba3db256672db7" title="Flush RX FIFO, used in RX mode. Should not be executed during transmission of acknowledge because ack...">RFM73_CMD_FLUSH_RX</a>, 0);</div>
</div><!-- fragment --> </li>
<li>
toggle internal register bank of RFM73 module: _rfm73_toggle_reg_bank. There are 2 register banks in RFM73 module and there is no necessity in switching to bank 2 in any time except initialization. </li>
<li>
send activate command to enable some features of the RFM73 module: _rfm73_activate. There is no deactivate function (but the module itself support this feature with the same code sequence). This function checks whether the module in active state and do not send anything in this case. </li>
</ul>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga8cca7f651a435875699648e969c98d15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _rfm73_activate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a command sequence that activate module commands R_RX_PL_WID, W_ACK_PAYLOAD, W_TX_PAYLOAD_NOACK. If this commands are already activated, does nothing. </p>

</div>
</div>
<a class="anchor" id="gafbdd68774b4b53c263b274a8784e5100"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _rfm73_read_buf </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read multi-byte data from some register, e.g.: read RX payload buffer, get RX address of pipeline 0 or 1, etc. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reg</td><td>- bitwise OR between read command and address of a register for which this command is being applied. </td></tr>
    <tr><td class="paramname">pBuf</td><td>- RAM-buffer, where data would be stored. </td></tr>
    <tr><td class="paramname">length</td><td>- number of bytes to be read. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gacc7444e6bb098e65f61fe35b20437517"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t _rfm73_read_cmd </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>reg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read data from internal register of the RFM73 module. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reg</td><td>- bitwise OR between command and a register address from which this operation would be perfomed, e.g. <div class="fragment"><div class="line">uint8_t foo = <a class="code" href="group__lowlevelfunc.html#gacc7444e6bb098e65f61fe35b20437517" title="Read data from internal register of the RFM73 module.">_rfm73_read_cmd</a>(<a class="code" href="group__internalcmd.html#ga7ecba9c761d1d16c38d61741ae4c3b35" title="Read command and status registers in format 000AAAAA. AAAAA = 5 bit Register Map Address.">RFM73_CMD_R_REGISTER</a> |</div>
<div class="line">                              <a class="code" href="group__internalreg.html#ga39078142dd90da359433f886378c482a" title="Address of FIFO status register.">RFM73_RADR_FIFO_STATUS</a>);</div>
</div><!-- fragment --> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value that was stored in this register. </dd></dl>

</div>
</div>
<a class="anchor" id="ga81bfd97d8bbcda8fcb4b79b358e4ee9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _rfm73_toggle_reg_bank </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rbank</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Toggles between 0 and 1 internal register bank of the module. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rbank</td><td>- what rbank should be select. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga416c9f0075f8caf35161a38803ab5d4c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _rfm73_write_buf </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write multi-byte data to the RFM73 module. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reg</td><td>- bitwise OR between read command and address of a register for which this command is being applied. </td></tr>
    <tr><td class="paramname">pBuf</td><td>- RAM-buffer, where data is stored. </td></tr>
    <tr><td class="paramname">length</td><td>- number of bytes to write. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga9714a9407031b0a4b4f6a94787112241"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _rfm73_write_cmd </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes some value to some internal register or send specific command to module. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reg</td><td>- bitwise OR between register address and command, e.g. <a class="el" href="group__internalcmd.html#ga4d0c723c8f108ea103aee9f1857cbfeb" title="Write command and status registers. AAAAA = 5 bit Register Map Address. Executable in power down or s...">RFM73_CMD_W_REGISTER</a> | <a class="el" href="group__internalreg.html#gac64a78bd306cd5c9737f07a94b216c1e" title="Address of configuration register.">RFM73_RADR_CONFIG</a>, <a class="el" href="group__internalcmd.html#gab59ccf5bcb2f5c4a8bedbdf83412ad80" title="Flush TX FIFO, used in TX mode.">RFM73_CMD_FLUSH_TX</a>, etc. </td></tr>
    <tr><td class="paramname">value</td><td>- some value, that would be written if this function is used to write data to register. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga01aad5cd35e15a8490dc12918c8e7023"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rfm73_power_down </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the RFM73 module to power down state, minimizing it power consumption. Receiver and transmitter are disabled. </p>

</div>
</div>
<a class="anchor" id="gaeb8d781baf114af4e2ad9f95b44aa567"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rfm73_power_up </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the RFM73 module to power up state. Module will go to standby-1 mode and after that to TX, RX or standby-2 mode depending on current configuration. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jul 5 2013 19:53:30 for RFM73 Library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
